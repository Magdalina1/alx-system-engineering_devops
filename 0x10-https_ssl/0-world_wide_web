#!/bin/bash
# Function to extract information about the domain or subdomain
extract_info() {
    local domain=$1
    local subdomain=$2
    local result
    if [[ -z $subdomain ]]; then
        # If subdomain is not provided, dig without subdomain
        result=$(dig +noall +answer $domain)
    else
        # If subdomain is provided, prepend it to the domain
        result=$(dig +noall +answer "$subdomain.$domain")
    fi
    # Extract record type and destination IP using awk
    echo "$result" | awk -v domain=$domain -v subdomain=$subdomain '
    {
        if (subdomain != "") { 
            print "The subdomain " subdomain " is a " $4 " record and points to " $5
        } else {
            split($1, parts, ".")
            print "The subdomain " parts[1] " is a " $4 " record and points to " $5
        }
    }'
}
# Main logic
domain=$1
subdomain=$2
# If subdomain is not specified, show info for default subdomains
if [[ -z $subdomain ]]; then
    for sub in www lb-01 web-01 web-02; do
        extract_info $domain $sub
    done
else
    # Show info for the specified subdomain
    extract_info $domain $subdomain
fi
